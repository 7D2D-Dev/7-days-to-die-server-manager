<h1>
    <%= user.username %>
</h1>


<table class="table table-bordered">
    <tbody>
        <tr>
            <td>Steam ID</td>
            <td>
                <%= user.steamId %>
            </td>
        </tr>
        <tr>
            <td>Discord ID</td>
            <td>
                <%= user.discordId %>
            </td>
        </tr>
    </tbody>
</table>


<h3>Owned server(s)</h3>

<table class="table table-bordered">
    <thead>
        <td>#</td>
        <td>Name</td>
        <td>Players</td>
    </thead>
    <tbody>
        <% servers.forEach(server => { %>
            <tr>
                <td>
                    <%= server.id %>
                </td>
                <td>
                    <%= server.name %>
                </td>
            </tr>
            <% }) %>
    </tbody>
</table>

<h3>Open tickets</h3>

<table class="table table-bordered">
    <thead>
        <td>Title</td>
        <td>Created on </td>
    </thead>
    <tbody>
        <% players.forEach(player => { %>
            <% player.tickets.forEach(ticket => {  %>
                <% if (ticket.status) { %>
                    <% let createdAt = new Date(ticket.createdAt) %>
                        <% let updatedAt = new Date(ticket.updatedAt) %>
                            <tr>
                                <td>
                                    <% let ticketLink = `/sdtdticket/${ticket.id}` %>
                                        <a href='<%= ticketLink %>'>
                                            <%= ticket.title %>
                                        </a>
                                </td>
                                <td>
                                    <%= createdAt.toDateString() %>
                                </td>
                            </tr>
                            <% } %>
                                <% }) %>
                                    <% }) %>
    </tbody>
</table>


<h3>Player profile(s)</h3>

<table class="table table-bordered">
    <thead>
        <td>Name</td>
        <td>Playtime</td>
        <td>Server </td>
        <td>Tickets</td>
    </thead>
    <tbody>
        <% players.forEach(player => { %>
            <tr>
                <td>
                    <%= player.name %>
                </td>
                <td>
                    <%= player.playtime %>
                </td>
                <td>
                    <%= player.server.name %>
                </td>
                <td>
                    <%= player.tickets.length %>
                </td>
            </tr>
            <% }) %>
    </tbody>
</table>